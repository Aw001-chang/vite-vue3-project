import{_ as S,R as L,x as N,k as p,M as j,m as M,f as A,o as l,c,b as f,w as x,a as t,t as r,L as F,F as y,g as V,p as g,q as w,n as I,J as B,K as O,d as q}from"./index.47c49ec5.js";import{b as P}from"./index.ac3bbb81.js";import{T as R}from"./TheStep.2b2bdb76.js";const e=d=>(B("data-v-8f6b5705"),d=d(),O(),d),z=e(()=>t("span",null,"STEP\xA002",-1)),D=e(()=>t("div",{class:"h5 mt-2"},"\u78BA\u8A8D\u4ED8\u6B3E",-1)),J=[z,D],K=e(()=>t("span",null,"STEP\xA003",-1)),U=e(()=>t("div",{class:"h5 mt-2"},"\u5B8C\u6210\u8A02\u55AE",-1)),X=[K,U],H={class:"row justify-content-center seperation-top seperation-bottom px-2 px-sm-0"},Q={key:0,class:"col-lg-12 col-sm-10 col-12 border-bottom pb-3"},W=e(()=>t("div",{class:"d-sm-flex justify-content-start align-items-end mb-sm-3 mb-5"},[t("div",{class:"h4 mb-sm-0 text-orange-800"},"\u8A02\u55AE\u7DE8\u865F"),t("span",{class:"text-danger ms-sm-2"},"\u8907\u88FD\u4EE5\u4FDD\u5B58\u60A8\u7684\u8A02\u55AE\u7DE8\u865F\uFF0C\u4FBF\u65BC\u67E5\u627E\u8A02\u55AE\u72C0\u614B")],-1)),Y={class:"d-sm-flex justify-content-between align-items-center"},Z={class:"h5 m-sm-0 mb-5 fw-bold text-wrap text-break text-primary"},tt={class:"row justify-content-between seperation-bottom"},et={class:"col-lg-5 col-md-6 col-12"},st=e(()=>t("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u5546\u54C1",-1)),ot={class:"items d-flex justify-content-center py-2 px-3 border-bottom"},at=["src"],lt={class:"good-title px-3"},ct={class:"mb-2"},nt={class:"text-1-line"},rt={class:"fw-bold mb-2"},dt={class:"fs-5 ms-auto mb-auto"},it={class:"h4 mt-5 text-end"},pt=e(()=>t("div",{class:"mb-2"},"\u7E3D\u8A08:",-1)),ut={class:"fw-bold text-danger"},_t={class:"col-md-6 col-12 mt-5 mt-md-0"},mt=e(()=>t("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u4EBA\u8CC7\u8A0A",-1)),ht={class:"mb-3"},vt=e(()=>t("label",{for:"formGroupExampleInput",class:"form-label h6"},"\u96FB\u5B50\u4FE1\u7BB1",-1)),bt=["value"],ft={class:"mb-3"},xt=e(()=>t("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u59D3\u540D",-1)),yt=["value"],gt={class:"mb-3"},wt=e(()=>t("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u96FB\u8A71",-1)),It=["value"],Ct={class:"mb-3"},kt=e(()=>t("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u5730\u5740",-1)),Et=["value"],Tt={class:"mb-5"},$t=e(()=>t("label",{for:"exampleFormControlTextarea1",class:"form-label"},[q("\u5099\u8A3B"),t("span",null,"\xA0(\u53EF\u9078\u586B)")],-1)),Gt=["value"],St={class:"d-block text-center"},Lt={key:0,class:"btn btn-toffee"},Nt={key:1,disabled:"",class:"btn btn-toffee"},jt={__name:"CartCheckout",setup(d){const _=L(),m=_.params.orderId,C=N(),{pushMessage:k}=C;let h;const u=p(!1),s=p({user:{}}),i=p(""),v=async()=>{try{const o=`https://vue3-course-api.hexschool.io/api/anpo/order/${m}`,a=await g.get(o);s.value=a.data.order,i.value=a.data.order.id}catch{}},E=async()=>{try{const o=`https://vue3-course-api.hexschool.io/api/anpo/pay/${m}`;u.value=!0;const a=await g.post(o);u.value=!1,a.data.success&&(v(),w())}catch(o){console.log(o)}},b=p(!1);j(async()=>{_.name==="cartCheckout"&&(b.value=!0)});const{copy:T}=P({orderListId:i}),$=o=>{T(o),h={style:"teal-700",content:"\u6210\u529F\u8907\u88FD\u8A02\u55AE\u7DE8\u865F"},w(),k(h)};return M(v),(o,a)=>{const G=A("Loading");return l(),c(y,null,[f(G,{active:u.value},null,8,["active"]),f(R,null,{"step-pay":x(()=>[t("div",{class:I([{active:b.value},"col-4 step text-center text-blue-600"])},J,2)]),"step-finish":x(()=>[t("div",{class:I([{active:s.value.is_paid!==!1},"col-4 step text-center text-blue-600"])},X,2)]),_:1}),t("div",H,[s.value.is_paid!==!1?(l(),c("div",Q,[W,t("div",Y,[t("div",Z,r(i.value),1),t("button",{onClick:a[0]||(a[0]=n=>$(i.value)),type:"button",class:"btn btn-primary"},"\u8907\u88FD\u8A02\u55AE\u7DE8\u865F ")])])):F("",!0)]),t("div",tt,[t("div",et,[st,(l(!0),c(y,null,V(s.value.products,n=>(l(),c("div",ot,[t("img",{src:n.product.imageUrl,class:"d-block",alt:""},null,8,at),t("div",lt,[t("div",ct,[t("div",nt,r(n.product.title),1)]),t("div",rt,"NT$\xA0"+r(n.product.price),1)]),t("div",dt,[t("div",null,"X"+r(n.qty),1)])]))),256)),t("div",it,[pt,t("div",ut,"NT$\xA0"+r(s.value.total),1)])]),t("div",_t,[mt,t("form",{class:"border p-3 rounded shadow",onSubmit:E},[t("div",ht,[vt,t("input",{value:s.value.user.email,disabled:"",type:"email",class:"form-control",id:"formGroupExampleInput",placeholder:"Example input placeholder"},null,8,bt)]),t("div",ft,[xt,t("input",{value:s.value.user.name,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,yt)]),t("div",gt,[wt,t("input",{value:s.value.user.tel,disabled:"",type:"tel",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,It)]),t("div",Ct,[kt,t("input",{value:s.value.user.address,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,Et)]),t("div",Tt,[$t,t("textarea",{value:s.value.message,disabled:"",class:"form-control",id:"exampleFormControlTextarea1",rows:"3"},null,8,Gt)]),t("div",St,[s.value.is_paid===!1?(l(),c("button",Lt,"\u78BA\u8A8D\u4ED8\u6B3E ")):(l(),c("button",Nt,"\u4ED8\u6B3E\u6210\u529F "))])],32)])])],64)}}},Vt=S(jt,[["__scopeId","data-v-8f6b5705"]]);export{Vt as default};
