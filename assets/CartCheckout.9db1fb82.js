import{_ as j,$ as N,u as L,h as d,V as M,s as V,i as A,o as l,a as c,d as x,w as y,b as e,t as r,j as F,U as B,F as g,D as O,J as w,K as I,G as C,p as P,k as D,e as U}from"./index.13e0b9c3.js";import{u as q}from"./index.23f264cd.js";import{T as z}from"./TheStep.8db08ac6.js";const t=i=>(P("data-v-01adda9a"),i=i(),D(),i),J=t(()=>e("span",null,"STEP\xA002",-1)),K=t(()=>e("div",{class:"h5 mt-2"},"\u78BA\u8A8D\u4ED8\u6B3E",-1)),R=[J,K],X=t(()=>e("span",null,"STEP\xA003",-1)),H=t(()=>e("div",{class:"h5 mt-2"},"\u5B8C\u6210\u8A02\u55AE",-1)),Q=[X,H],W={class:"row justify-content-center seperation-top seperation-bottom px-2 px-sm-0"},Y={key:0,class:"col-lg-12 col-12 border-bottom pb-3"},Z=t(()=>e("div",{class:"d-flex flex-md-row flex-column justify-content-start align-items-md-end align-items-center mb-md-3 mb-5"},[e("div",{class:"h4 mb-md-0 text-orange-800"},"\u8A02\u55AE\u7DE8\u865F"),e("span",{class:"text-danger ms-md-2 ms-0"},"\u8907\u88FD\u4EE5\u4FDD\u5B58\u60A8\u7684\u8A02\u55AE\u7DE8\u865F\uFF0C\u4FBF\u65BC\u67E5\u627E\u8A02\u55AE\u72C0\u614B")],-1)),ee={class:"d-flex flex-md-row flex-column justify-content-between align-items-center"},te={class:"h5 m-md-0 mb-5 fw-bold text-wrap text-break text-primary"},se={class:"row justify-content-between seperation-bottom"},oe={class:"col-lg-5 col-md-6 col-12"},ae=t(()=>e("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u5546\u54C1",-1)),le={class:"items d-flex justify-content-center py-2 px-3 border-bottom"},ce=["src"],ne={class:"good-title px-3"},de={class:"mb-2"},re={class:"text-1-line"},ie={class:"fw-bold mb-2"},ue={class:"fs-5 ms-auto mb-auto"},pe={class:"h4 mt-5 text-end"},_e=t(()=>e("div",{class:"mb-2"},"\u7E3D\u8A08:",-1)),me={class:"fw-bold text-danger"},he={class:"col-md-6 col-12 mt-5 mt-md-0"},ve=t(()=>e("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u4EBA\u8CC7\u8A0A",-1)),fe={class:"mb-3"},be=t(()=>e("label",{for:"formGroupExampleInput",class:"form-label h6"},"\u96FB\u5B50\u4FE1\u7BB1",-1)),xe=["value"],ye={class:"mb-3"},ge=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u59D3\u540D",-1)),we=["value"],Ie={class:"mb-3"},Ce=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u96FB\u8A71",-1)),ke=["value"],Ee={class:"mb-3"},Te=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u5730\u5740",-1)),$e=["value"],Ge={class:"mb-5"},Se=t(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},[U("\u5099\u8A3B"),e("span",null,"\xA0(\u53EF\u9078\u586B)")],-1)),je=["value"],Ne={class:"d-block text-center"},Le={key:0,class:"btn btn-toffee"},Me={key:1,disabled:"",class:"btn btn-toffee"},Ve={__name:"CartCheckout",setup(i){const _=N(),m=_.params.orderId,k=L(),{pushMessage:E}=k;let h;const p=d(!1),s=d({user:{}}),u=d(""),v=d(!1),f=async()=>{try{const o=`https://vue3-course-api.hexschool.io/api/anpo/order/${m}`,a=await w.get(o);s.value=a.data.order,u.value=a.data.order.id,v.value=a.data.order.is_paid}catch(o){console.log(o.response)}},T=async()=>{try{const o=`https://vue3-course-api.hexschool.io/api/anpo/pay/${m}`;p.value=!0;const a=await w.post(o);p.value=!1,a.data.success&&(f(),I())}catch(o){console.log(o.response)}},b=d(!1);M(async()=>{_.name==="cartCheckout"&&(b.value=!0)});const{copy:$}=q({orderListId:u}),G=o=>{$(o),h={style:"teal-700",content:"\u6210\u529F\u8907\u88FD\u8A02\u55AE\u7DE8\u865F"},I(),E(h)};return V(f),(o,a)=>{const S=A("Loading");return l(),c(g,null,[x(S,{active:p.value},null,8,["active"]),x(z,null,{"step-pay":y(()=>[e("div",{class:C([{active:b.value},"col-4 step text-center text-blue-600"])},R,2)]),"step-finish":y(()=>[e("div",{class:C([{active:s.value.is_paid!==!1},"col-4 step text-center text-blue-600"])},Q,2)]),_:1}),e("div",W,[v.value===!0?(l(),c("div",Y,[Z,e("div",ee,[e("div",te,r(u.value),1),e("button",{onClick:a[0]||(a[0]=F(n=>G(u.value),["prevent"])),type:"button",class:"btn btn-primary"},"\u8907\u88FD\u8A02\u55AE\u7DE8\u865F ")])])):B("",!0)]),e("div",se,[e("div",oe,[ae,(l(!0),c(g,null,O(s.value.products,n=>(l(),c("div",le,[e("img",{src:n.product.imageUrl,class:"d-block",alt:""},null,8,ce),e("div",ne,[e("div",de,[e("div",re,r(n.product.title),1)]),e("div",ie,"NT$\xA0"+r(n.product.price),1)]),e("div",ue,[e("div",null,"X"+r(n.qty),1)])]))),256)),e("div",pe,[_e,e("div",me,"NT$\xA0"+r(s.value.total),1)])]),e("div",he,[ve,e("form",{class:"border p-3 rounded shadow",onSubmit:T},[e("div",fe,[be,e("input",{value:s.value.user.email,disabled:"",type:"email",class:"form-control",id:"formGroupExampleInput",placeholder:"Example input placeholder"},null,8,xe)]),e("div",ye,[ge,e("input",{value:s.value.user.name,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,we)]),e("div",Ie,[Ce,e("input",{value:s.value.user.tel,disabled:"",type:"tel",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,ke)]),e("div",Ee,[Te,e("input",{value:s.value.user.address,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,$e)]),e("div",Ge,[Se,e("textarea",{value:s.value.message,disabled:"",class:"form-control",id:"exampleFormControlTextarea1",rows:"3"},null,8,je)]),e("div",Ne,[s.value.is_paid===!1?(l(),c("button",Le,"\u78BA\u8A8D\u4ED8\u6B3E ")):(l(),c("button",Me,"\u4ED8\u6B3E\u6210\u529F "))])],32)])])],64)}}},Oe=j(Ve,[["__scopeId","data-v-01adda9a"]]);export{Oe as default};
