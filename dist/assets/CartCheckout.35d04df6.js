import{_ as j,W as N,u as L,h as d,Q as M,i as A,v as F,j as P,o as l,a as c,d as x,w as y,b as e,t as r,k as V,P as B,F as g,G as O,Y as w,a7 as I,I as C,p as q,l as z,e as D}from"./index.80fdc881.js";import{T as Q}from"./TheStep.3616a9ad.js";const t=i=>(q("data-v-26e52d82"),i=i(),z(),i),R=t(()=>e("span",null,"STEP\xA002",-1)),U=t(()=>e("div",{class:"h5 mt-2"},"\u78BA\u8A8D\u4ED8\u6B3E",-1)),W=[R,U],X=t(()=>e("span",null,"STEP\xA003",-1)),Y=t(()=>e("div",{class:"h5 mt-2"},"\u5B8C\u6210\u8A02\u55AE",-1)),H=[X,Y],J={class:"row justify-content-center seperation-top seperation-bottom px-2 px-sm-0"},K={key:0,class:"col-lg-12 col-12 border-bottom pb-3"},Z=t(()=>e("div",{class:"d-flex flex-md-row flex-column justify-content-start align-items-md-end align-items-center mb-md-3 mb-5"},[e("div",{class:"h4 mb-md-0 text-orange-800"},"\u8A02\u55AE\u7DE8\u865F"),e("span",{class:"text-danger ms-md-2 ms-0"},"\u8907\u88FD\u4EE5\u4FDD\u5B58\u60A8\u7684\u8A02\u55AE\u7DE8\u865F\uFF0C\u4FBF\u65BC\u67E5\u627E\u8A02\u55AE\u72C0\u614B")],-1)),ee={class:"d-flex flex-md-row flex-column justify-content-between align-items-center"},te={class:"h5 m-md-0 mb-5 fw-bold text-wrap text-break text-primary"},se={class:"row justify-content-between seperation-bottom"},oe={class:"col-lg-5 col-md-6 col-12"},ae=t(()=>e("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u5546\u54C1",-1)),le={class:"items d-flex justify-content-center py-2 px-3 border-bottom"},ce=["src"],ne={class:"good-title px-3"},de={class:"mb-2"},re={class:"text-1-line"},ie={class:"fw-bold mb-2"},ue={class:"fs-5 ms-auto mb-auto"},pe={class:"h4 mt-5 text-end"},_e=t(()=>e("div",{class:"mb-2"},"\u7E3D\u8A08:",-1)),me={class:"fw-bold text-danger"},he={class:"col-md-6 col-12 mt-5 mt-md-0"},ve=t(()=>e("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u4EBA\u8CC7\u8A0A",-1)),be={class:"mb-3"},fe=t(()=>e("label",{for:"formGroupExampleInput",class:"form-label h6"},"\u96FB\u5B50\u4FE1\u7BB1",-1)),xe=["value"],ye={class:"mb-3"},ge=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u59D3\u540D",-1)),we=["value"],Ie={class:"mb-3"},Ce=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u96FB\u8A71",-1)),ke=["value"],Ee={class:"mb-3"},Te=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u5730\u5740",-1)),Ge=["value"],$e={class:"mb-5"},Se=t(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},[D("\u5099\u8A3B"),e("span",null,"\xA0(\u53EF\u9078\u586B)")],-1)),je=["value"],Ne={class:"d-block text-center"},Le={key:0,class:"btn btn-toffee"},Me={key:1,disabled:"",class:"btn btn-toffee"},Ae={__name:"CartCheckout",setup(i){const m=N(),h=m.params.orderId,k=L(),{pushMessage:E}=k;let v;const p=d(!1),o=d({user:{}}),u=d(""),_=d(!1),b=async()=>{try{const s=`https://vue3-course-api.hexschool.io/api/anpo/order/${h}`,a=await w.get(s);o.value=a.data.order,u.value=a.data.order.id,_.value=a.data.order.is_paid}catch(s){console.log(s.response)}},T=async()=>{try{const s=`https://vue3-course-api.hexschool.io/api/anpo/pay/${h}`;p.value=!0;const a=await w.post(s);p.value=!1,a.data.success&&(b(),I())}catch(s){console.log(s.response)}},f=d(!1);M(async()=>{m.name==="cartCheckout"&&(f.value=!0)});const{copy:G}=A({orderListId:u}),$=s=>{G(s),v={style:"teal-700",content:"\u6210\u529F\u8907\u88FD\u8A02\u55AE\u7DE8\u865F"},I(),E(v)};return F(b),(s,a)=>{const S=P("Loading");return l(),c(g,null,[x(S,{active:p.value},null,8,["active"]),x(Q,null,{"step-pay":y(()=>[e("div",{class:C([{active:f.value},"col-4 step text-center text-blue-600"])},W,2)]),"step-finish":y(()=>[e("div",{class:C([{active:_.value===!0},"col-4 step text-center text-blue-600"])},H,2)]),_:1}),e("div",J,[_.value===!0?(l(),c("div",K,[Z,e("div",ee,[e("div",te,r(u.value),1),e("button",{onClick:a[0]||(a[0]=V(n=>$(u.value),["prevent"])),type:"button",class:"btn btn-primary"},"\u8907\u88FD\u8A02\u55AE\u7DE8\u865F ")])])):B("",!0)]),e("div",se,[e("div",oe,[ae,(l(!0),c(g,null,O(o.value.products,n=>(l(),c("div",le,[e("img",{src:n.product.imageUrl,class:"d-block",alt:""},null,8,ce),e("div",ne,[e("div",de,[e("div",re,r(n.product.title),1)]),e("div",ie,"NT$\xA0"+r(n.product.price),1)]),e("div",ue,[e("div",null,"X"+r(n.qty),1)])]))),256)),e("div",pe,[_e,e("div",me,"NT$\xA0"+r(o.value.total),1)])]),e("div",he,[ve,e("form",{class:"border p-3 rounded shadow",onSubmit:T},[e("div",be,[fe,e("input",{value:o.value.user.email,disabled:"",type:"email",class:"form-control",id:"formGroupExampleInput",placeholder:"Example input placeholder"},null,8,xe)]),e("div",ye,[ge,e("input",{value:o.value.user.name,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,we)]),e("div",Ie,[Ce,e("input",{value:o.value.user.tel,disabled:"",type:"tel",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,ke)]),e("div",Ee,[Te,e("input",{value:o.value.user.address,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,Ge)]),e("div",$e,[Se,e("textarea",{value:o.value.message,disabled:"",class:"form-control",id:"exampleFormControlTextarea1",rows:"3"},null,8,je)]),e("div",Ne,[o.value.is_paid===!1?(l(),c("button",Le,"\u78BA\u8A8D\u4ED8\u6B3E ")):(l(),c("button",Me,"\u4ED8\u6B3E\u6210\u529F "))])],32)])])],64)}}},Ve=j(Ae,[["__scopeId","data-v-26e52d82"]]);export{Ve as default};
