import{_ as N,$ as j,u as L,h as d,V,s as A,i as F,o as l,a as c,d as x,w as y,b as e,t as r,U as M,F as g,D as B,J as w,K as I,G as C,p as O,k as P,e as D}from"./index.5ece6270.js";import{u as U}from"./index.ebafebd2.js";import{T as q}from"./TheStep.67aba09e.js";const t=i=>(O("data-v-e331acd7"),i=i(),P(),i),z=t(()=>e("span",null,"STEP\xA002",-1)),J=t(()=>e("div",{class:"h5 mt-2"},"\u78BA\u8A8D\u4ED8\u6B3E",-1)),K=[z,J],R=t(()=>e("span",null,"STEP\xA003",-1)),X=t(()=>e("div",{class:"h5 mt-2"},"\u5B8C\u6210\u8A02\u55AE",-1)),H=[R,X],Q={class:"row justify-content-center seperation-top seperation-bottom px-2 px-sm-0"},W={key:0,class:"col-lg-12 col-12 border-bottom pb-3"},Y=t(()=>e("div",{class:"d-flex flex-md-row flex-column justify-content-start align-items-md-end align-items-center mb-md-3 mb-5"},[e("div",{class:"h4 mb-md-0 text-orange-800"},"\u8A02\u55AE\u7DE8\u865F"),e("span",{class:"text-danger ms-md-2 ms-0"},"\u8907\u88FD\u4EE5\u4FDD\u5B58\u60A8\u7684\u8A02\u55AE\u7DE8\u865F\uFF0C\u4FBF\u65BC\u67E5\u627E\u8A02\u55AE\u72C0\u614B")],-1)),Z={class:"d-flex flex-md-row flex-column justify-content-between align-items-center"},ee={class:"h5 m-md-0 mb-5 fw-bold text-wrap text-break text-primary"},te={class:"row justify-content-between seperation-bottom"},se={class:"col-lg-5 col-md-6 col-12"},oe=t(()=>e("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u5546\u54C1",-1)),ae={class:"items d-flex justify-content-center py-2 px-3 border-bottom"},le=["src"],ce={class:"good-title px-3"},ne={class:"mb-2"},de={class:"text-1-line"},re={class:"fw-bold mb-2"},ie={class:"fs-5 ms-auto mb-auto"},ue={class:"h4 mt-5 text-end"},pe=t(()=>e("div",{class:"mb-2"},"\u7E3D\u8A08:",-1)),_e={class:"fw-bold text-danger"},me={class:"col-md-6 col-12 mt-5 mt-md-0"},he=t(()=>e("div",{class:"h4 mb-4 text-center text-md-start text-orange-800"},"\u8A02\u8CFC\u4EBA\u8CC7\u8A0A",-1)),ve={class:"mb-3"},be=t(()=>e("label",{for:"formGroupExampleInput",class:"form-label h6"},"\u96FB\u5B50\u4FE1\u7BB1",-1)),fe=["value"],xe={class:"mb-3"},ye=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u59D3\u540D",-1)),ge=["value"],we={class:"mb-3"},Ie=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u96FB\u8A71",-1)),Ce=["value"],ke={class:"mb-3"},Ee=t(()=>e("label",{for:"formGroupExampleInput2",class:"form-label h6"},"\u6536\u4EF6\u4EBA\u5730\u5740",-1)),Te=["value"],$e={class:"mb-5"},Ge=t(()=>e("label",{for:"exampleFormControlTextarea1",class:"form-label"},[D("\u5099\u8A3B"),e("span",null,"\xA0(\u53EF\u9078\u586B)")],-1)),Se=["value"],Ne={class:"d-block text-center"},je={key:0,class:"btn btn-toffee"},Le={key:1,disabled:"",class:"btn btn-toffee"},Ve={__name:"CartCheckout",setup(i){const _=j(),m=_.params.orderId,k=L(),{pushMessage:E}=k;let h;const p=d(!1),s=d({user:{}}),u=d(""),v=d(!1),b=async()=>{try{const o=`https://vue3-course-api.hexschool.io/api/anpo/order/${m}`,a=await w.get(o);s.value=a.data.order,u.value=a.data.order.id,v.value=a.data.order.is_paid}catch(o){console.log(o.response)}},T=async()=>{try{const o=`https://vue3-course-api.hexschool.io/api/anpo/pay/${m}`;p.value=!0;const a=await w.post(o);p.value=!1,a.data.success&&(b(),I())}catch(o){console.log(o.response)}},f=d(!1);V(async()=>{_.name==="cartCheckout"&&(f.value=!0)});const{copy:$}=U({orderListId:u}),G=o=>{$(o),h={style:"teal-700",content:"\u6210\u529F\u8907\u88FD\u8A02\u55AE\u7DE8\u865F"},I(),E(h)};return A(b),(o,a)=>{const S=F("Loading");return l(),c(g,null,[x(S,{active:p.value},null,8,["active"]),x(q,null,{"step-pay":y(()=>[e("div",{class:C([{active:f.value},"col-4 step text-center text-blue-600"])},K,2)]),"step-finish":y(()=>[e("div",{class:C([{active:s.value.is_paid!==!1},"col-4 step text-center text-blue-600"])},H,2)]),_:1}),e("div",Q,[v.value===!0?(l(),c("div",W,[Y,e("div",Z,[e("div",ee,r(u.value),1),e("button",{onClick:a[0]||(a[0]=n=>G(u.value)),type:"button",class:"btn btn-primary"},"\u8907\u88FD\u8A02\u55AE\u7DE8\u865F ")])])):M("",!0)]),e("div",te,[e("div",se,[oe,(l(!0),c(g,null,B(s.value.products,n=>(l(),c("div",ae,[e("img",{src:n.product.imageUrl,class:"d-block",alt:""},null,8,le),e("div",ce,[e("div",ne,[e("div",de,r(n.product.title),1)]),e("div",re,"NT$\xA0"+r(n.product.price),1)]),e("div",ie,[e("div",null,"X"+r(n.qty),1)])]))),256)),e("div",ue,[pe,e("div",_e,"NT$\xA0"+r(s.value.total),1)])]),e("div",me,[he,e("form",{class:"border p-3 rounded shadow",onSubmit:T},[e("div",ve,[be,e("input",{value:s.value.user.email,disabled:"",type:"email",class:"form-control",id:"formGroupExampleInput",placeholder:"Example input placeholder"},null,8,fe)]),e("div",xe,[ye,e("input",{value:s.value.user.name,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,ge)]),e("div",we,[Ie,e("input",{value:s.value.user.tel,disabled:"",type:"tel",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,Ce)]),e("div",ke,[Ee,e("input",{value:s.value.user.address,disabled:"",type:"text",class:"form-control",id:"formGroupExampleInput2",placeholder:"Another input placeholder"},null,8,Te)]),e("div",$e,[Ge,e("textarea",{value:s.value.message,disabled:"",class:"form-control",id:"exampleFormControlTextarea1",rows:"3"},null,8,Se)]),e("div",Ne,[s.value.is_paid===!1?(l(),c("button",je,"\u78BA\u8A8D\u4ED8\u6B3E ")):(l(),c("button",Le,"\u4ED8\u6B3E\u6210\u529F "))])],32)])])],64)}}},Be=N(Ve,[["__scopeId","data-v-e331acd7"]]);export{Be as default};
